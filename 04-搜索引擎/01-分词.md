**为什么需要搜索引擎**

数据库适合结构化数据的精确查询，而不适合半结构化、非结构化数据的模糊查询及灵活搜索（特别是数据量大时），无法提供想要的实时性。

**索引原理**：对列值创建排序存储，数据结构={列值、行地址}。在有序数据列表中就可以利用二分查找快速找到要查找的行的地址，再根据地址直接取行数据。



**Like**  时索引失效，全表扫描，数据量大时是噩梦。



**反向索引**（倒排索引， Inverted index）

英语单词的大致数量是10万个
汉字的总数已经超过了8万,而常用的只有3500字
《现代汉语规范词典》比《现代汉语词典》收录的字和词数量更多。前者是13000多字，72000多词，后者是11000多字，69000多词

**Java开源中文分词器**

https://www.cnblogs.com/lishanyang/p/6017155.html

1、word分词器
2、Ansj分词器
3、Stanford分词器
4、FudanNLP分词器
5、Jieba分词器
6、Jcseg分词器
7、MMSeg4j分词器
8、IKAnalyzer分词器
9、Paoding分词器
10、smartcn分词器
11、HanLP分词器

**分词器与自然语言的关系**：每门语言有对应的分词器

**中文分词器原理**：有个词的字典，对语句前后字进行组合，与字典匹配，歧义分析

**分词器选择**： 准确率、分词效率、中英文混合分词支持

**反向索引示例**

| 词   | 标题                     | 内容                             |
| ---- | ------------------------ | -------------------------------- |
| 电脑 | {{1,2,{9,11}},{2,1,{8}}} | {{1,1,{11},{8,1,{90}}}           |
| 手机 | {{4,1,{18}}}             | {{1,2,{21,32}},{4,3,{18,29,45}}} |

格式： {id, count, {offset1..offsetN}}

使用分词器对数据进行分词，创建反向索引

**相关性如何度量**

1、包含要找的词
2、建立相关性评估机制
	出现次数:
	加入权重，如标题权重10，内容权重1
	tf-idf词频-逆文档率模型
	向量空间模型
	贝叶斯概率模型，如：BM25

**索引更新**

先删除在更新

**索引存储**

内存 or 磁盘，主要还是看索引的大小

**索引模式**

精确、模糊，并结合AND、OR

### **搜索引擎**

可对大量结构化、半结构化数据、非结构化文本类数据进行实时搜索。

专门解决大量结构化、半结构化数据、非结构化文本类数据的实时检索问题。

**核心部件**

数据源
分词器
反向索引（倒排索引）
相关性计算模型

**工作原理**

从数据源加载数据，分词、建立反向索引
搜索时，对搜索输入进行分词，查找反向索引
计算相关性，排序，输出

### 开源搜索引擎

**Lucene**：Apache顶级开源项目，Lucene-core是一个开放源代码的全文检索引擎工具包，但它不是一个完整的全文检索引擎，而是一个全文检索引擎的框架，提供了完整的查询引擎和索引引擎，部分文本分词引擎（英文与德文两种西方语言）。Lucene的目的是为软件开发人员提供一个简单易用的工具包，以方便的在目标系统中实现全文检索的功能，或者是以此为基础建立起完整的全文检索引擎。

**Nutch**：Apache顶级开源项目，包含网络爬虫和搜索引擎(基于lucene)的系统（同百度、google）。Hadoop因它而生。

**Solr**：Lucene下的子项目，基于Lucene构建的独立的企业级开源搜索平台，一个服务。它提供了基于xml/JSON/http的api供外界访问，还有web管理界面。

**Elasticsearch**：基于Lucene的企业级分布式搜索平台，它对外提供restful-web接口，让程序员可以轻松、方便使用搜索平台，而不需要了解Lucene。




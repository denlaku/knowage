当使用elasticsearch进行更大时间的数据分析用例时，我们建议使用基于时间的索引和分层架构，其中包含3种不同类型的节点（主节点，Hot热节点和Warm暖冷节点），我们将其称为“冷热数据分离 “架构。每个节点都有自己的特征，如下所述。

### 主节点

我们建议每个群集运行3个专用主节点，以提供最大的弹性性能。使用这些时，您还应将discovery.zen.minimum_master_nodes设置为2，这样可以防止出现“裂脑”情况。
利用专用主节点，仅负责处理集群管理和状态，提高整体稳定性。
因为它们不包含数据也不参与搜索和索引操作，所以它们在繁重索引或长时间的搜索期间可能不会遇到对JVM的相同需求。因此不太可能受到长时间垃圾收集暂停（gc pause）的影响。
因此，可以为它们配置CPU，RAM和磁盘配置，远低于数据节点所需的配置。

### 热节点

此专用数据节点执行集群中的所有索引操作。他们也拥有最新的、最常被查询的索引数据。
由于索引是CPU和IO密集型操作，因此这些服务器需要功能强大，并且需要连接SSD存储。
我们建议至少运行3个热节点以实现高可用性。
根据您希望收集和查询的最新数据量，您可能需要增加此数字以实现性能目标。

### 暖冷节点

这种类型的数据节点旨在处理大量不经常查询的只读索引。
由于这些索引是只读的，因此热节点倾向于使用大型连接磁盘（通常是机械磁盘）而不是SSD。
与热节点一样，我们建议至少使用3个热节点以实现高可用性。
和以前一样，需要注意的是，大量数据可能需要额外的节点来满足性能要求。

另请注意，CPU和内存配置通常需要接近热节点的配置。这只能通过测试类似于您在生产环境中遇到的查询来确定。


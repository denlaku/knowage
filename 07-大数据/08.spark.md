七周期并发模型

# 一、spark安装包下载

1、官网下载

<http://spark.apache.org/downloads.html>

2、从微软的镜像站下载

<http://mirrors.hust.edu.cn/apache/>

3、从清华的镜像站下载

<https://mirrors.tuna.tsinghua.edu.cn/apache/>



## 二、安装基础

1、Java8安装成功

2、zookeeper安装成功

3、hadoop2.7.5 HA安装成功

4、Scala安装成功（不安装进程也可以启动）



### 进入spark/conf修改配置文件

复制spark-env.sh.template并重命名为spark-env.sh，并在文件最后添加配置内容

```shell
export JAVA_HOME=/lib/java/jdk1.8.0_144/
export HADOOP_HOME=/home/hadoop/hadoop-2.8.1
export HADOOP_CONF_DIR=/home/hadoop/hadoop-2.8.1/etc/hadoop
export SPARK_WORKER_MEMORY=500m
export SPARK_WORKER_CORES=1
export SPARK_DAEMON_JAVA_OPTS="-Dspark.deploy.recoveryMode=ZOOKEEPER -Dspark.deploy.zookeeper.url=H21:2181,H22:2181,H23:2181 -Dspark.deploy.zookeeper.dir=/spark"
```

复制slaves.template成slaves，并添加如下内容

```shell
H21
H22
H23
```

将安装包分发给其他节点

```
scp -r spark-2.3.0-bin-hadoop2.7/ hadoop2:$PWD
```

### 配置环境变量

```
export SPARK_HOME=/home/hadoop/apps/spark
export PATH=$PATH:$SPARK_HOME/bin
```